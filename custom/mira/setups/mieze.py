description = 'MIEZE measurement setup'
group = 'basic'

includes = ['cascade', 'relay']
modules = ['nicos.mira.mieze']

devices = dict(
    mieze    = device('mira.mieze.MiezeMaster'),

    amp1     = device('mira.rfcircuit.GeneratorDevice',
                      tacodevice = 'mira/hp33220a_1/amp',
                      abslimits = (0, 1)),
    amp2     = device('mira.rfcircuit.GeneratorDevice',
                      tacodevice = 'mira/hp33220a_2/amp',
                      abslimits = (0, 1)),
    amp3     = device('mira.rfcircuit.GeneratorDevice',
                      tacodevice = 'mira/hp33220a_3/amp',
                      warnlimits = (4.999, 5.001),
                      abslimits = (0, 5)),

    freq1    = device('mira.rfcircuit.GeneratorDevice',
                      tacodevice = 'mira/hp33220a_1/freq',
                      fmtstr = '%.0f',
                      abslimits = (0, 80000000)),
    freq2    = device('mira.rfcircuit.GeneratorDevice',
                      tacodevice = 'mira/hp33220a_2/freq',
                      fmtstr = '%.0f',
                      abslimits = (0, 80000000)),
    freq3    = device('mira.rfcircuit.GeneratorDevice',
                      tacodevice = 'mira/hp33220a_3/freq',
                      fmtstr = '%.0f',
                      abslimits = (0, 80000000)),

    coilamp1 = device('devices.taco.AnalogInput',
                      tacodevice = 'mira/tds2014/ch1_pk2pk',
                      pollinterval = 5,
                      maxage = 6),
    coilamp2 = device('devices.taco.AnalogInput',
                      tacodevice = 'mira/tds2014/ch2_pk2pk',
                      pollinterval = 5,
                      maxage = 6),

#    dc1       = device('devices.taco.CurrentSupply',
#                       tacodevice = 'mira/heinzinger/current',
#                       abslimits = (0, 100),
#                       ramp = 0,
#                       variance = 5,
#                       fmtstr = '%.2f'),
    dc1       = device('mira.heinzinger.HeinzingerViaHPE',
                       tacodevice = 'mira/network/rs7_3',
                       abslimits = (0, 30),
                       fmtstr = '%.2f'),
#    dc2       = device('mira.ntn.Supply',
#                       tacodevice = 'mira/ntn14000m/current',
#                       abslimits = (0, 100),
#                       ramp = 0,
#                       variance = 5,
#                       offset = 0,
#                       readoffset = 0.348132,
#                       readslope = 1.02465,
#                       fmtstr = '%.2f'),
    dc2       = device('mira.ntn.FUG',
                       tacodevice = 'mira/network/rs7_2',
                       abslimits = (0, 100),
                       readoffset = 0.348132,
                       readslope = 1.02465,
                       fmtstr = '%.2f'),

   # dc3n25    = device('devices.taco.CurrentSupply',
   #                    tacodevice = '//mira4/mira/hpe3631a_1/n25cur',
   #                    abslimits = (0, 1),
   #                    fmtstr = '%.2f'),
   # dc3p25    = device('devices.taco.CurrentSupply',
   #                    tacodevice = '//mira4/mira/hpe3631a_1/p25cur',
   #                    abslimits = (0, 1),
   #                    fmtstr = '%.2f'),
   # dc3p6     = device('devices.taco.CurrentSupply',
   #                    tacodevice = '//mira4/mira/hpe3631a_1/p6cur',
   #                    abslimits = (0, 5),
   #                    fmtstr = '%.2f'),

   # dc4n25    = device('devices.taco.CurrentSupply',
   #                    tacodevice = '//mira4/mira/hpe3631a_2/n25cur',
   #                    abslimits = (0, 1),
   #                    fmtstr = '%.2f'),
   # dc4p25    = device('devices.taco.CurrentSupply',
   #                    tacodevice = '//mira4/mira/hpe3631a_2/p25cur',
   #                    abslimits = (0, 1),
   #                    fmtstr = '%.2f'),
   # dc4p6     = device('devices.taco.CurrentSupply',
   #                    tacodevice = '//mira4/mira/hpe3631a_2/p6cur',
   #                    abslimits = (0, 5),
   #                    fmtstr = '%.2f'),

    fp1       = device('devices.taco.AnalogInput',
                       tacodevice = 'mira/ag1016/fp1'),
    rp1       = device('devices.taco.AnalogInput',
                       tacodevice = 'mira/ag1016/rp1',
                       warnlimits = (0, 20)),
    fp2       = device('devices.taco.AnalogInput',
                       tacodevice = 'mira/ag1016/fp2'),
    rp2       = device('devices.taco.AnalogInput',
                       tacodevice = 'mira/ag1016/rp2',
                       warnlimits = (0, 20)),

    Cbox1     = device('mira.beckhoff.BeckhoffDigitalOutput',
                       tacodevice = 'mira/modbus/beckhoff',
                       startoffset = 0,
                       bitwidth = 32),
    Cbox2     = device('mira.beckhoff.BeckhoffDigitalOutput',
                       tacodevice = 'mira/modbus/beckhoff',
                       startoffset = 32,
                       bitwidth = 32),

)
