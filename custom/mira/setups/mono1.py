description = 'MIRA1 monochromator'
group = 'lowlevel'

includes = ['base', 'sample', 'alias_mono']

tango_host = 'mira1.mira.frm2:10000'

devices = dict(
    co_m1tt  = device('devices.tango.Sensor',
                      lowlevel = True,
                      tangodevice = 'tango://%s/mira/mono1/mtt_enc' % tango_host,
                      unit = 'deg',
                      precision = 0.05,
                     ),
    mo_m1tt  = device('devices.tango.Motor',
                      tangodevice = 'tango://%s/mira/mono1/mtt_mot' % tango_host,
                      abslimits = (-50.0, 0),
                      lowlevel = True,
                      precision = 0.05,
                     ),
    m1tt     = device('mira.axis.HoveringAxis',
                      description = 'monochromator two-theta angle',
                      abslimits = (-50.0, 0),
                      motor = 'mo_m1tt',
                      coder = 'co_m1tt',
                      obs = [],
                      startdelay = 1,
                      stopdelay = 4,
                      switch = 'air_mono',
                      switchvalues = (0, 1),
                      fmtstr = '%.3f',
                      precision = 0.05,
                     ),

    co_m1th  = device('devices.tango.Sensor',
                      lowlevel = True,
                      tangodevice = 'tango://%s/mira/mono1/mth_enc' % tango_host,
                      unit = 'deg',
                      precision = 0.02,
                     ),
    mo_m1th  = device('devices.tango.Motor',
                      lowlevel = True,
                      tangodevice = 'tango://%s/mira/mono1/mth_mot' % tango_host,
                      abslimits = (-25.0, 0.0),
                      unit = 'deg',
                      precision = 0.02,
                     ),
    m1th     = device('devices.generic.Axis',
                      description = 'monochromator theta angle',
                      motor = 'mo_m1th',
                      coder = 'co_m1th',
                      obs = [],
                      fmtstr = '%.3f',
                      precision = 0.02,
                     ),

    co_m1tx  = device('devices.tango.Sensor',
                      lowlevel = True,
                      tangodevice = 'tango://%s/mira/mono1/mtx_enc' % tango_host,
                      unit = 'mm',
                      precision = 0.02,
                     ),
    mo_m1tx  = device('devices.tango.Motor',
                      lowlevel = True,
                      tangodevice = 'tango://%s/mira/mono1/mtx_mot' % tango_host,
                      abslimits = (-15.0, 15.0),
                      unit = 'mm',
                      precision = 0.02,
                     ),
    m1tx     = device('devices.generic.Axis',
                      description = 'monochromator translation',
                      motor = 'mo_m1tx',
                      coder = 'co_m1tx',
                      obs = [],
                      fmtstr = '%.3f',
                      precision = 0.2,
                     ),

    co_m1ty  = device('devices.tango.Sensor',
                      lowlevel = True,
                      tangodevice = 'tango://%s/mira/mono1/mty_enc' % tango_host,
                      unit = 'mm',
                      precision = 0.2,
                     ),
    mo_m1ty  = device('devices.tango.Motor',
                      lowlevel = True,
                      tangodevice = 'tango://%s/mira/mono1/mty_mot' % tango_host,
                      abslimits = (-15.0, 15.0),
                      unit = 'mm',
                      precision = 0.2,
                     ),
    m1ty     = device('devices.generic.Axis',
                      description = 'monochromator translation',
                      motor = 'mo_m1ty',
                      coder = 'co_m1ty',
                      obs = [],
                      fmtstr = '%.3f',
                      precision = 0.2,
                     ),

    co_m1gx  = device('devices.tango.Sensor',
                      lowlevel = True,
                      tangodevice = 'tango://%s/mira/mono1/mgx_enc' % tango_host,
                      unit = 'deg',
                      precision = 0.02,
                     ),
    mo_m1gx  = device('devices.tango.Motor',
                      lowlevel = True,
                      tangodevice = 'tango://%s/mira/mono1/mgx_mot' % tango_host,
                      abslimits = (-5.0, 5.0),
                      unit = 'deg',
                      precision = 0.02,
                     ),
    m1gx     = device('devices.generic.Axis',
                      description = 'monochromator tilt',
                      motor = 'mo_m1gx',
                      coder = 'co_m1gx',
                      obs = [],
                      fmtstr = '%.3f',
                      precision = 0.02,
                     ),

    co_m1ch  = device('devices.tango.Sensor',
                      lowlevel = True,
                      tangodevice = 'tango://%s/mira/mono1/mch_enc' % tango_host,
                      unit = 'deg',
                      precision = 0.02,
                     ),

    mo_m1ch  = device('devices.tango.Motor',
                      tangodevice = 'tango://%s/mira/mono1/mch_mot' % tango_host,
                      abslimits = (-360, 360),
                      lowlevel = True,
                     ),
    m1ch     = device('devices.generic.Axis',
                      description = 'monochromator changer table rotation',
                      motor = 'mo_m1ch',
                      coder = 'co_m1ch',
                      obs = [],
                      fmtstr = '%.3f',
                      precision = 0.05,
                     ),
)

startupcode = '''
mth.alias = m1th
mtt.alias = m1tt
mtx.alias = m1tx
mty.alias = m1ty
mgx.alias = m1gx
mfv.alias = None
'''
