description = 'base setup for all instrument configurations'
group = 'lowlevel'

includes = ['system', 'slits', 'sample', 'reactor']

devices = dict(
    MonoToni = device('nicos.mira.toni.ModBus',
                      tacodevice = 'mira/rs232/monotoni',
                      tacolog = False,
                      lowlevel = True),

    atten1   = device('nicos.mira.toni.Valve',
                      bus = 'MonoToni',
                      addr = 241,
                      channel = 6,
                      states = ['out', 'in']),
    atten2   = device('nicos.mira.toni.Valve',
                      bus = 'MonoToni',
                      addr = 241,
                      channel = 7,
                      states = ['out', 'in']),
    lamfilter = device('nicos.mira.toni.Valve',
                       bus = 'MonoToni',
                       addr = 241,
                       channel = 4,
                       states = ['in', 'out']),
    FOL       = device('nicos.mira.toni.Valve',
                       bus = 'MonoToni',
                       addr = 241,
                       channel = 0,
                       states = ['out', 'in']),
    flip1     = device('nicos.mira.toni.Valve',
                       bus = 'MonoToni',
                       addr = 241,
                       channel = 3,
                       states = ['out', 'in']),
    flip2     = device('nicos.mira.toni.Valve',
                       bus = 'MonoToni',
                       addr = 241,
                       channel = 3,
                       states = ['in', 'out']),
    ms2pos    = device('nicos.mira.toni.Valve',
                       bus = 'MonoToni',
                       addr = 241,
                       channel = 5,
                       states = ['out', 'in']),

    Shutter   = device('nicos.mira.shutter.Shutter',
                       tacodevice = 'mira/io/in_unused',
                       output = 'mira/io/closeshutter',
                       mapping = {0: 'closed', 1: 'open'}),

    Cooling   = device('nicos.taco.NamedDigitalInput',
                       mapping = {0: 'refill', 1: 'okay'},
                       pollinterval = 10,
                       maxage = 30,
                       tacodevice = 'mira/io/cooling'),

    # LeckToni  = device('nicos.mira.toni.ModBus',
    #                    tacodevice = 'mira/rs232/lecktoni',
    #                    lowlevel = True),

    # Leckmon   = device('nicos.mira.toni.Leckmon',
    #                    bus = 'LeckToni',
    #                    addr = 0x17,
    #                    unit = ''),
)
