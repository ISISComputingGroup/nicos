name = 'simtest'

group = 'simulated'

sysconfig = dict(
    instrument = 'mira',
    experiment = 'Exp',
    datasinks = ['conssink', 'filesink', 'dmnsink', 'gracesink'],
)

devices = dict(
    t_kf = device('nicos.tas.Wavevector',
        base = 't_ana',
        tas = 'mira',
        description = '',
        loglevel = 'info',
        maxage = 6,
        fmtstr = '%s',
        opmode = 'CKF',
        userlimits = (0, 10),
        lowlevel = False,
        abslimits = (0, 10),
        pollinterval = 5,
        unit = 'A-1',
        target = 0.0,
    ),
    t_ki = device('nicos.tas.Wavevector',
        base = 't_mono',
        tas = 'mira',
        description = '',
        loglevel = 'info',
        maxage = 6,
        fmtstr = '%s',
        opmode = 'CKI',
        userlimits = (0, 10),
        lowlevel = False,
        abslimits = (0, 10),
        pollinterval = 5,
        unit = 'A-1',
        target = 0.0,
    ),
    atten2 = device('nicos.mira.toni.Valve',
        bus = 'MonoToni',
        states = ['out', 'in'],
        description = '',
        loglevel = 'info',
        waittime = 4,
        maxage = 6,
        fmtstr = '%s',
        addr = 241,
        channel = 7,
        lowlevel = False,
        pollinterval = 5,
        unit = '',
        target = 0.0,
    ),
    atten1 = device('nicos.mira.toni.Valve',
        bus = 'MonoToni',
        states = ['out', 'in'],
        description = '',
        loglevel = 'info',
        waittime = 4,
        maxage = 6,
        fmtstr = '%s',
        addr = 241,
        channel = 6,
        lowlevel = False,
        pollinterval = 5,
        unit = '',
        target = 0.0,
    ),
    FlipperMira1in = device('nicos.mira.toni.Valve',
        bus = 'MonoToni',
        states = ['out', 'in'],
        description = '',
        loglevel = 'info',
        waittime = 4,
        maxage = 6,
        fmtstr = '%s',
        addr = 241,
        channel = 3,
        lowlevel = False,
        pollinterval = 5,
        unit = '',
        target = 0.0,
    ),
    t_psi = device('nicos.virtual.VirtualMotor',
        jitter = 0.05,
        description = '',
        loglevel = 'info',
        pollinterval = 5,
        userlimits = (0, 360),
        maxage = 6,
        curstatus = (100, 'idle'),
        fmtstr = '%.3f',
        curvalue = 0.0,
        offset = 0.0,
        lowlevel = False,
        abslimits = (0, 360),
        speed = 2,
        unit = 'deg',
        target = 56.236201067442373,
    ),
    t_phi = device('nicos.virtual.VirtualMotor',
        jitter = 0.01,
        description = '',
        loglevel = 'info',
        pollinterval = 5,
        userlimits = (-180, 180),
        maxage = 6,
        curstatus = (100, 'idle'),
        fmtstr = '%.3f',
        curvalue = 0.0,
        offset = 0.0,
        lowlevel = False,
        abslimits = (-180, 180),
        speed = 1,
        unit = 'deg',
        target = -18.197739594653626,
    ),
    t_ana = device('nicos.virtual.VirtualMotor',
        jitter = 0.02,
        description = '',
        loglevel = 'info',
        pollinterval = 5,
        userlimits = (0, 10),
        maxage = 6,
        curstatus = (100, 'idle'),
        fmtstr = '%.3f',
        curvalue = 0.0,
        offset = 0.0,
        lowlevel = False,
        abslimits = (0, 10),
        speed = 0.0,
        unit = 'A-1',
        target = 1.9730879351919417,
    ),
    mon1 = device('nicos.detector.FRMCounterChannel',
        fmtstr = '%s',
        ismaster = 0,
        description = '',
        tacotimeout = 3,
        loglevel = 'info',
        type = 'monitor',
        tacodevice = '//mira4/mira/frmctr/a1',
        maxage = 6,
        tacolog = False,
        mode = 'normal',
        preselection = 1L,
        lowlevel = True,
        pollinterval = 5,
        unit = 'cts',
    ),
    lamfilter = device('nicos.mira.toni.Valve',
        bus = 'MonoToni',
        states = ['in', 'out'],
        description = '',
        loglevel = 'info',
        waittime = 4,
        maxage = 6,
        fmtstr = '%s',
        addr = 241,
        channel = 4,
        lowlevel = False,
        pollinterval = 5,
        unit = '',
        target = 'in',
    ),
    TD = device('nicos.temperature.Sensor',
        tacolog = False,
        description = 'Sensor D: Be Filter temperature',
        tacotimeout = 3,
        loglevel = 'info',
        curvename = 'PT-100',
        tacodevice = 'mira/ls340/d',
        maxage = 5,
        fmtstr = '%.1f',
        serno = '',
        sensortype = 'Platinum 100 (250 Ohm)',
        offset = 0.0,
        lowlevel = False,
        pollinterval = 3,
        unit = 'K',
    ),
    TB = device('nicos.temperature.Sensor',
        tacolog = False,
        description = '',
        tacotimeout = 3,
        loglevel = 'info',
        curvename = 'PT-100',
        tacodevice = 'mira/ls340/b',
        maxage = 2,
        fmtstr = '%s',
        serno = 'X58925',
        sensortype = 'Platinum 100 (250 Ohm)',
        offset = 0.0,
        lowlevel = False,
        pollinterval = 0.7,
        unit = 'K',
    ),
    TC = device('nicos.temperature.Sensor',
        tacolog = False,
        description = '',
        tacotimeout = 3,
        loglevel = 'info',
        curvename = 'PT-100',
        tacodevice = 'mira/ls340/c',
        maxage = 2,
        fmtstr = '%s',
        serno = '',
        sensortype = 'Platinum 100 (250 Ohm)',
        offset = 0.0,
        lowlevel = False,
        pollinterval = 0.7,
        unit = 'K',
    ),
    dmnsink = device('nicos.data.DaemonSink',
        lowlevel = False,
        loglevel = 'info',
        scantypes = [],
        description = '',
    ),
    FOLin = device('nicos.mira.toni.Valve',
        bus = 'MonoToni',
        states = ['out', 'in'],
        description = '',
        loglevel = 'info',
        waittime = 4,
        maxage = 6,
        fmtstr = '%s',
        addr = 241,
        channel = 0,
        lowlevel = False,
        pollinterval = 5,
        unit = '',
        target = 0.0,
    ),
    MonoToni = device('nicos.mira.toni.ModBus',
        tacolog = False,
        loglevel = 'debug',
        description = '',
        tacotimeout = 3,
        lowlevel = True,
        tacodevice = 'mira/rs232/monotoni',
        maxtries = 5,
        source = 0,
    ),
    mira = device('nicos.tas.TAS',
        cell = 'Sample',
        mono = 't_mono',
        phi = 't_phi',
        psi = 't_psi',
        ana = 't_ana',
        description = '',
        loglevel = 'info',
        responsible = 'Robert Georgii <robert.georgii@frm2.tum.de>',
        maxage = 6,
        scatteringsense = [1, -1, 1],
        fmtstr = '[%7.4f, %7.4f, %7.4f, %7.4f, %7.4f]',
        instrument = 'MIRA',
        axiscoupling = True,
        energytransferunit = 'THz',
        opmode = 'CKI',
        lowlevel = False,
        psi360 = True,
        pollinterval = 5,
        unit = 'rlu rlu rlu THz A-1',
        target = [1, 0, 0, 1.6, None],
    ),
    psd = device('nicos.mira.cascade.CascadeDetector',
        roi = (-1, -1, -1, -1),
        description = '',
        nametemplate = {'image': 'cascade_%05d.pad', 'tof': 'cascade_%05d.tof'},
        loglevel = 'info',
        lastfilename = '',
        datapath = [],
        maxage = 6,
        fmtstr = 'roi %s, total %s, file %s',
        debugmsg = False,
        mode = 'tof',
        lastcounts = (0, 0),
        preselection = 10.0,
        lowlevel = False,
        server = 'cascade.mira.frm2:1234',
        pollinterval = 5,
        unit = '',
        lastfilenumber = 0,
    ),
    gracesink = device('nicos.data.GraceSink',
        lowlevel = False,
        loglevel = 'info',
        scantypes = [],
        description = '',
    ),
    T = device('nicos.temperature.Controller',
        primary_sensor = 'TA',
        description = '',
        tacodevice = 'mira/ls340/control',
        setpoint = 4.0,
        tacolog = False,
        loopdelay = 1,
        offset = 0.0,
        abslimits = (0, 300),
        unit = 'K',
        d = 5.0,
        target = 0.0,
        tacotimeout = 3,
        loglevel = 'info',
        i = 10.0,
        ramp = 0.0,
        maxage = 2,
        fmtstr = '%s',
        p = 40.0,
        window = 5.0,
        tolerance = 0.05,
        timeout = 600.0,
        userlimits = (0, 300),
        lowlevel = False,
        pollinterval = 0.7,
    ),
    Exp = device('nicos.mira.experiment.MiraExperiment',
        sample = 'Sample',
        remark = '',
        description = '',
        title = '',
        loglevel = 'info',
        _propdb = 'useroffice@tacodb.taco.frm2:useroffice',
        datapath = ['/data/testdata'],
        scriptdir = '.',
        detlist = ['det'],
        lowlevel = False,
        envlist = [],
        proposal = '',
        users = [],
    ),
    ctr1 = device('nicos.detector.FRMCounterChannel',
        fmtstr = '%s',
        ismaster = 0,
        description = '',
        tacotimeout = 3,
        loglevel = 'info',
        type = 'counter',
        tacodevice = '//mira4/mira/frmctr/a2',
        maxage = 6,
        tacolog = False,
        mode = 'normal',
        preselection = 1L,
        lowlevel = True,
        pollinterval = 5,
        unit = 'cts',
    ),
    smser = device('nicos.notify.SMSer',
        loglevel = 'info',
        description = '',
        receivers = [],
        lowlevel = False,
        minruntime = 300,
        subject = 'NICOS',
        server = 'triton.admin.frm2',
    ),
    t_mono = device('nicos.virtual.VirtualMotor',
        jitter = 0.02,
        description = '',
        loglevel = 'info',
        pollinterval = 5,
        userlimits = (0, 10),
        maxage = 6,
        curstatus = (100, 'idle'),
        fmtstr = '%.3f',
        curvalue = 0.0,
        offset = 0.0,
        lowlevel = False,
        abslimits = (0, 10),
        speed = 0.0,
        unit = 'A-1',
        target = 2.662,
    ),
    conssink = device('nicos.data.ConsoleSink',
        lowlevel = False,
        loglevel = 'info',
        scantypes = [],
        description = '',
    ),
    FlipperMira2in = device('nicos.mira.toni.Valve',
        bus = 'MonoToni',
        states = ['in', 'out'],
        description = '',
        loglevel = 'info',
        waittime = 4,
        maxage = 6,
        fmtstr = '%s',
        addr = 241,
        channel = 3,
        lowlevel = False,
        pollinterval = 5,
        unit = '',
        target = 0.0,
    ),
    DetHV = device('nicos.mira.iseg.IsegHV',
        tacolog = False,
        description = '',
        tacotimeout = 3,
        loglevel = 'info',
        tacodevice = 'mira/network/detectorrs_4',
        ramp = 10,
        maxage = 20,
        fmtstr = '%s',
        channel = 2,
        userlimits = (0, 950),
        lowlevel = False,
        abslimits = (0, 950),
        pollinterval = 10,
        unit = '',
        target = 0.0,
    ),
    det = device('nicos.detector.FRMDetector',
        m1 = 'mon1',
        t = 'timer',
        m3 = None,
        m2 = None,
        z4 = None,
        z5 = None,
        z1 = 'ctr1',
        z2 = None,
        z3 = None,
        fmtstr = 'timer %s, mon1 %s, ctr1 %s',
        loglevel = 'info',
        description = '',
        lowlevel = False,
        pollinterval = 0.5,
        maxage = 3,
        unit = '',
    ),
    MonHV = device('nicos.mira.iseg.IsegHV',
        tacolog = False,
        description = '',
        tacotimeout = 3,
        loglevel = 'info',
        tacodevice = 'mira/network/mira1rs_4',
        ramp = 50,
        maxage = 30,
        fmtstr = '%s',
        channel = 1,
        userlimits = (0, 500),
        lowlevel = False,
        abslimits = (0, 500),
        pollinterval = 10,
        unit = '',
        target = 0.0,
    ),
    timer = device('nicos.detector.FRMTimerChannel',
        fmtstr = '%s',
        ismaster = True,
        description = '',
        tacotimeout = 3,
        loglevel = 'info',
        tacodevice = '//mira4/mira/frmctr/at',
        maxage = 6,
        tacolog = False,
        mode = 'preselection',
        preselection = 1.0,
        lowlevel = True,
        pollinterval = 5,
        unit = 's',
    ),
    email = device('nicos.notify.Mailer',
        sender = 'nicos@mira1',
        description = '',
        receivers = [],
        loglevel = 'info',
        minruntime = 300,
        copies = ['rgeorgii@frm2.tum.de'],
        lowlevel = False,
        subject = 'MIRA',
    ),
    Sample = device('nicos.tas.TASSample',
        orient2 = [0, 1, 0],
        description = '',
        orient1 = [1, 0, 0],
        loglevel = 'info',
        samplename = '',
        lattice = [6.283185307179586, 6.283185307179586, 6.283185307179586],
        psi0 = 0.0,
        angles = [90, 90, 90],
        lowlevel = False,
    ),
    filesink = device('nicos.data.AsciiDatafileSink',
        commentchar = '#',
        description = '',
        semicolon = True,
        loglevel = 'info',
        datapath = [],
        lowlevel = False,
        scantypes = [],
        globalcounter = '/data/filecounter',
        lastfilenumber = 0,
    ),
    TA = device('nicos.temperature.Sensor',
        tacolog = False,
        description = '',
        tacotimeout = 3,
        loglevel = 'info',
        curvename = 'PT-100',
        tacodevice = 'mira/ls340/a',
        maxage = 2,
        fmtstr = '%s',
        serno = 'X58941',
        sensortype = 'Platinum 100 (250 Ohm)',
        offset = 0.0,
        lowlevel = False,
        pollinterval = 0.7,
        unit = 'K',
    ),
    PSDHV = device('nicos.mira.iseg.IsegHV',
        tacolog = False,
        description = '',
        tacotimeout = 3,
        loglevel = 'info',
        tacodevice = 'mira/network/detectorrs_4',
        ramp = 2,
        maxage = 20,
        fmtstr = '%s',
        channel = 1,
        userlimits = (-3000, 0),
        lowlevel = False,
        abslimits = (-3000, 0),
        pollinterval = 10,
        unit = '',
        target = 0.0,
    ),
)

startupcode = """
_SimulationRestore('atten2', 0)
_SimulationRestore('atten1', 0)
_SimulationRestore('FlipperMira1in', 0)
_SimulationRestore('t_psi', 56.236201067442373)
_SimulationRestore('t_phi', -18.197739594653626)
_SimulationRestore('t_ana', 1.9730879351919417)
_SimulationRestore('mon1', 0)
_SimulationRestore('lamfilter', 0)
_SimulationRestore('TD', 0)
_SimulationRestore('TB', 0)
_SimulationRestore('TC', 0)
_SimulationRestore('FOLin', 0)
_SimulationRestore('psd', 0)
_SimulationRestore('T', 0)
_SimulationRestore('ctr1', 0)
_SimulationRestore('t_mono', 2.662)
_SimulationRestore('FlipperMira2in', 0)
_SimulationRestore('DetHV', 0)
_SimulationRestore('MonHV', 0)
_SimulationRestore('timer', 0)
_SimulationRestore('TA', 0)
_SimulationRestore('PSDHV', 0)
"""
