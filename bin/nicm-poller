#!/usr/bin/env python

import sys
import signal

from nicm.errors import ConfigurationError, UsageError
from nicm.interface import simple

def handler(signum, frame):
    poller.quit()
signal.signal(signal.SIGINT, handler)   # control-c
signal.signal(signal.SIGTERM, handler)  # terminate

try:
    nicos = simple.start('poller-' + sys.argv[1])
    poller = nicos.getDevice('Poller')
except (ConfigurationError, UsageError), err:
    print >>sys.stderr, 'Fatal error:', err
    sys.exit(1)
poller.start()
poller.wait()
