#!/usr/bin/env python

import sys, os
from os import path
thisfile = path.abspath(__file__)
while path.islink(thisfile):
    thisfile = path.join(path.dirname(thisfile), os.readlink(thisfile))

os.environ['PYTHONPATH'] = path.normpath(path.dirname(thisfile) + '/../lib')
os.environ['PYQTDESIGNERPATH'] = \
    path.normpath(path.dirname(thisfile) + '/../lib/nicos/guisupport')

modules = []
args = []
for item in sys.argv[1:]:
    if item.startswith('nicos.') and not item.endswith('.ui'):
        modules.append(item)
    else:
        args.append(item)

os.environ['NICOSDESIGNER_MODULES'] = ':'.join(modules)

os.execvp('designer', ['designer'] + args)
