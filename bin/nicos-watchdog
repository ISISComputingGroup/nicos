#!/usr/bin/env python

import argparse
import sys

from os import path

sys.path.insert(0, path.dirname(path.dirname(path.realpath(__file__))))

from nicos.core.sessions.simple import NoninteractiveSession

parser = argparse.ArgumentParser()
parser.add_argument('-d', '--daemon', dest='daemon', action='store_true',
                    help='daemonize the watchdog process')
parser.add_argument('-S', '--setup', action='store', dest='setupname',
                    default='watchdog',
                    help="name of the setup, default is 'watchdog'")
opts = parser.parse_args()

NoninteractiveSession.run(opts.setupname, maindevname='Watchdog',
                          daemon=opts.daemon)
