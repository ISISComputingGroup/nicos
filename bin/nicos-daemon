#!/usr/bin/env python

import argparse
import sys

from os import path

sys.path.insert(0, path.dirname(path.dirname(path.realpath(__file__))))

from nicos.services.daemon.session import DaemonSession

parser = argparse.ArgumentParser()
parser.add_argument('-d', '--daemon', dest='daemon', action='store_true',
                    help='daemonize the daemon process')
parser.add_argument('-S', '--setup', action='store', dest='setupname',
                    default='daemon',
                    help="name of the setup, default is 'daemon'")
opts = parser.parse_args()

DaemonSession.run(opts.setupname, 'Daemon', daemon=opts.daemon)
